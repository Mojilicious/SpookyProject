<!-- Hey, buddy, what's up? Why're you looking at the source code? There's no secret here! Honest! -->
<!DOCTYPE html>
<html>
      <!-- Now... I'm *not* going to stop you. But really, you're just in for a wild goose chase. -->
    <head>
        <meta charset="UTF-8" />    
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css">
    </head>
    <!-- Maybe you just want to see how it works? Fine. But there's really nothing here. -->
<body>
        <!-- Will you go away if I show you a secret? -->

        <!-- Of which there are none! Now, shoo! We're all busy here!! SCRAM!!! -->
    <main>

    <div class="container">
        <div class="wrapper">
            <ul id="carousel" class="box">
                <!-- Carousel items will be injected here -->
            </ul>
        </div>
        
    </div>
                <div id="carousel-description-box">
              <div id="carousel-description"></div>
            </div>
    <script src="movies.js"></script>
  <script>
      // --- Carousel Setup for Smooth Transitions ---
      const movies = window.movies;
      let activeIndex = 0;
      const carousel = document.getElementById('carousel');
      const descBox = document.getElementById('carousel-description');

      // Create carousel items only once
      function setupCarousel() {
        movies.forEach((movie, idx) => {
          const li = document.createElement('li');
          li.className = 'card-item';
          li.style.height = '';
          li.dataset.idx = idx;
          li.innerHTML = `
            <img src="${movie.img}" alt="${movie.title}" />
            <div class="carousel-item-box" data-overlay="${idx}">
              <span class="carousel-title" data-idx="${idx}">
                #${idx+1}
              </span>
            </div>
          `;
          li.onclick = () => {
            if (activeIndex !== idx) {
              setActiveIndex(idx);
            }
          };
          li.onmouseover = () => {
            if (idx !== activeIndex) li.classList.add('is-hovering');
            updateCarousel();
          };
          li.onmouseout = () => {
            li.classList.remove('is-hovering');
            updateCarousel();
          };
          carousel.appendChild(li);
        });
      }

      function setActiveIndex(idx) {
        activeIndex = idx;
        updateCarousel();
        updateDescription();
      }

      function updateCarousel() {
        Array.from(carousel.children).forEach((li, idx) => {
        const isActive = idx === activeIndex;
        const isHovering = li.classList.contains('is-hovering');
        li.classList.remove('is-active', 'is-hovering', 'is-inactive');

        if (isActive) {
          li.classList.add('is-active');
        } else if (isHovering) {
          li.classList.add('is-hovering');
        } else {
          li.classList.add('is-inactive');
        }
        });
      }

      function updateDescription() {
        descBox.classList.remove('visible');
        setTimeout(() => {
        // Show the title as a pseudo header in the description area
        const tags = movies[activeIndex].tags.map(tag => `<span class="tag-item">${tag}</span>`).join('');
        descBox.innerHTML = `
        <div class="movie-total">
        <span class="movie-title">${movies[activeIndex].title}</span>
        <div class="tags">${tags}</div>
        <span class="movie-desc">${movies[activeIndex].desc}</span>
        </div>
        <details class="spoiler-box">
        <summary class="spoiler-title">!!SPOILERS!! CLICK ME, if you dare!! :3</summary>
        <p class="spoiler-content">${movies[activeIndex].spoilers}</p></details>
        <div class="spoiler-tag-explain">The section above contains the film's trigger warnings and the screenor's comments. <br>Please be advised of potential spoilers.</div>`; 
        
          descBox.classList.add('visible');
        }, 600); 
      }

      setupCarousel();
      setActiveIndex(activeIndex);
      
    </script>
    </main>
</body>
</html>